!function(e,t){for(var n in t)e[n]=t[n]}(this,function(n){var o={};function r(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=n,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=4)}([function(e,t,n){function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=znui.React||n(1),r=znui.ReactDOM||n(5),a=n(2),i=n(3);e.exports=znui.react.createClass({displayName:"AjaxUploader",getDefaultProps:function(){return{action:"",changeSubmit:!0,hiddens:null,multiple:!0,size:""}},getInitialState:function(){return{loading:!1}},__onInputChange:function(e){if(this.state.loading)return!1;var t=e.nativeEvent.target.files;if(t.length){var n=this.props.onChange&&this.props.onChange(t,this);if(!1!==n&&this.props.changeSubmit){var o=new FormData,r=this.props.hiddens||{},a=null;for(var i in zn.is(n,"object")&&zn.extend(r,n),r)"object"==l(a=r[i])&&(a=JSON.stringify(a)),o.append(i,a);for(var s=0,p=t.length;s<p;s++)o.append("upload_file_"+s,t[s]);this.ajaxUpload(o)}}},__onInputClick:function(e){if(this.state.loading)return!1;e.stopPropagation(),this.props.onUploaderClick&&this.props.onUploaderClick(e,this)},ajaxUpload:function(e){this.setState({loading:!0});var t=new XMLHttpRequest;t.upload.addEventListener("progress",this.__ajaxUploadProgress,!1),t.addEventListener("load",this.__ajaxUploadComplete,!1),t.addEventListener("error",this.__ajaxUploadError,!1),t.addEventListener("abort",this.__ajaxUploadAbort,!1),t.open("POST",zn.http.fixURL(this.props.action),"true"),t.send(e)},__ajaxUploadProgress:function(e){e.lengthComputable&&(e.progress=Math.round(100*e.loaded/e.total)),this.props.onUploading&&this.props.onUploading(e,this)},__ajaxUploadComplete:function(e){this.reset();var t=JSON.parse(e.target.responseText);200==t.status?this.props.onComplete&&this.props.onComplete(t.result,this):(zn.confirm(t.result),this.props.onError&&this.props.onError(t.result,this))},__ajaxUploadError:function(e){this.reset(),this.props.onError&&this.props.onError(e.message,this)},__ajaxUploadAbort:function(e){this.reset(),this.props.onAbort&&this.props.onAbort(e,this)},reset:function(){this.setState({loading:!1}),r.findDOMNode(this).reset()},render:function(){return o.createElement("form",{className:znui.react.classname("zr-ajax-uploader",this.props.className),style:this.props.style,"data-loading":this.state.loading,action:zn.http.fixURL(this.props.action||""),encType:"multipart/form-data",method:"POST"},o.createElement("div",{className:"ajax-upload-container"},this.props.children),this.props.size&&o.createElement("span",{className:"size"},this.props.size),o.createElement("input",{multiple:this.props.multiple,className:"input",type:"file",name:this.props.name||"upload_file_"+(new Date).getTime(),onChange:this.__onInputChange,onClick:this.__onInputClick}),o.createElement("div",{className:"ajax-upload-icon"},o.createElement(a.FontAwesomeIcon,{icon:i.faUpload})))}})},function(e,t){!function(){e.exports=this.React}()},function(e,t){!function(){e.exports=this.rf}()},function(e,t){!function(){e.exports=this.fssi}()},function(e,t,n){e.exports={AjaxUploader:n(0),FileUploader:n(6),ImageUploader:n(7)}},function(e,t){!function(){e.exports=this.ReactDOM}()},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var a=znui.React||n(1),i=n(0),s=n(2),p=n(3);e.exports=znui.react.createClass({getDefaultProps:function(){return{editable:!0}},getInitialState:function(){return{value:","}},__onChange:function(e){var t=e[0];this.props.onChange&&this.props.onChange(t)},__onComplete:function(e,t){var n=(e||[]).map(function(e){return e.url});this.state.value=this.state.value+n.join(",")+",",this.forceUpdate(),this.props.onComplete&&this.props.onComplete(e,t)},getValue:function(){return this.state.value},setValue:function(e){this.setState({value:e})},__onPreview:function(e){this.props.onPreview&&this.props.onPreview(e)},__renderContent:function(e){var t=this,n=this.props.onFileRender&&this.props.onFileRender(e);return n||a.createElement("a",{onClick:function(){return t.__onPreview(e)}},this.__renderFileByType(e.split(".").pop().toLowerCase(),e))},__renderPreviewFileByType:function(e,t){if(this.props.isImage)return a.createElement("img",{width:"100%",height:"100%",src:zn.http.fixURL(t)});switch(e){case"jpg":case"png":case"jpeg":case"gif":return a.createElement("img",{width:"100%",height:"100%",src:zn.http.fixURL(t)});case"mp4":case"mpg":case"mpeg":case"mov":case"ogg":case"avi":case"aac":case"aiff":case"qt":case"viv":return a.createElement("video",{width:"100%",height:"100%",preload:"auto",loop:"loop",autoplay:"autoplay",controls:"controls"},a.createElement("source",{src:zn.http.fixURL(t),type:"video/ogg"}),a.createElement("source",{src:zn.http.fixURL(t),type:"video/mp4"}),"Your browser does not support the video tag.");default:return t.split("/").pop()}},__renderFileByType:function(e,t){if(this.props.isImage)return a.createElement("img",{src:zn.http.fixURL(t)});switch(e){case"jpg":case"png":case"jpeg":case"gif":return a.createElement("img",{src:zn.http.fixURL(t)});case"mp4":case"mpg":case"mpeg":case"mov":case"ogg":case"avi":case"aac":case"aiff":case"qt":case"viv":return a.createElement("video",{width:"96",height:"96"},a.createElement("source",{src:zn.http.fixURL(t),type:"video/ogg"}),a.createElement("source",{src:zn.http.fixURL(t),type:"video/mp4"}),"Your browser does not support the video tag.");default:return t.split("/").pop()}},__onRemove:function(e){this.state.value=this.state.value.replace(e,""),this.forceUpdate()},render:function(){var e=this.state.value.split(","),o=this.props.editable&&!this.props.disabled&&!this.props.readonly;return a.createElement("div",{className:znui.react.classname("zr-file-uploader",this.props.className),style:this.props.style},o&&a.createElement(i,r({},this.props,{style:this.props.uploaderStyle,onChange:this.__onChange,onComplete:this.__onComplete}),a.createElement("div",{className:"container"},a.createElement("div",{className:"file-upload-icon"},a.createElement(s.FontAwesomeIcon,{icon:p.faFileUpload})))),a.createElement("ul",{className:"file-list"},e.map(function(e,t){var n=this;if(e)return a.createElement("li",{key:t,className:"file"},o&&a.createElement("i",{className:"fa fa-remove zr-hover-self-loading",onClick:function(){return n.__onRemove(e,t)}}),this.__renderContent(e))}.bind(this))))}})},function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var r=znui.React||n(1),a=n(0),i=n(2),s=n(3);e.exports=r.createClass({displayName:"exports",getDefaultProps:function(){return{value:""}},getInitialState:function(){return{value:this.props.value}},__onChange:function(e){var t=e[0];if(-1==t.type.indexOf("image"))return alert("文件["+t.name+"]不是图片类型"),!1},__onComplete:function(e){var t=e[0];if(t){var n=t.url;0!=n.indexOf("/")&&(n="/"+n),this.setValue(n)}this.props.onComplete&&this.props.onComplete(t,this)},getValue:function(){return this.state.value},setValue:function(e){this.setState({value:e},function(){this.props.onChange&&this.props.onChange(e,this)}.bind(this))},render:function(){var e=this.state.value;return 0==e.indexOf("/")&&(e=zn.http.fixURL(this.state.value)),r.createElement(a,o({},this.props,{className:znui.react.classname("zr-image-uploader",this.props.className),onChange:this.__onChange,onComplete:this.__onComplete,multipart:!1}),r.createElement("div",{className:"container"},e?r.createElement("img",{className:"img",src:e}):r.createElement("div",{className:"image-upload-icon"},r.createElement(i.FontAwesomeIcon,{icon:s.faImage}))))}})}]));