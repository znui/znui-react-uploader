!function(e,t){for(var s in t)e[s]=t[s]}(this,function(s){var a={};function i(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}return i.m=s,i.c=a,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=3)}([function(e,t){!function(){e.exports=this.React}()},function(e,t,s){function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=znui.React||s(0),i=znui.ReactDOM||s(4);e.exports=znui.react.createClass({displayName:"AjaxUploader",getDefaultProps:function(){return{name:"zr_ajax_uploader_file",action:"/zxnz.core.fs/upload/files",changeSubmit:!0,hiddens:null,multiple:!0,hint:!1,maxFileSize:524288e3,size:""}},getInitialState:function(){return{host:this.props.host||zn.setting.path("zr.uploader.host"),loading:!1,progress:0,timeStamp:0}},__onInputChange:function(e){if(this.state.loading)return!1;var t=e.nativeEvent.target.files,s=new FormData,a=[];if(!t.length)return alert("未选择文件");for(var i=0,n=t.length;i<n;i++){if(t[i].size>this.props.maxFileSize)return alert(t[i].name+" 文件大小是"+znui.react.stringifyFileSize(t[i].size)+", 不能超过"+znui.react.stringifyFileSize(this.props.maxFileSize)),e.nativeEvent.target.form.reset(),!1;a.push(t[i]),s.append(this.props.name+"_"+i,t[i])}var r=this.props.onChange&&this.props.onChange(a,this);if(!1!==r&&this.props.changeSubmit){var o=this.props.hiddens||{},l=null;for(var p in zn.is(r,"object")&&zn.extend(o,r),o)"object"==c(l=o[p])&&(l=JSON.stringify(l)),s.append(p,l);this.ajaxUpload(s)}},__onInputClick:function(e){if(this.state.loading)return!1;e.stopPropagation(),this.props.onUploaderClick&&this.props.onUploaderClick(e,this)},ajaxUpload:function(e){var t=this.state.host||zn.setting.path("zr.uploader.uploadHost"),s=this.props.action||this.props.uploadApi||zn.setting.path("zr.uploader.uploadApi");if(!(s=t+s))return console.error("文件上传接口未输入"),!1;this.setState({loading:!0});var a=new XMLHttpRequest;a.upload.addEventListener("progress",this.__ajaxUploadProgress,!1),a.addEventListener("load",this.__ajaxUploadComplete,!1),a.addEventListener("error",this.__ajaxUploadError,!1),a.addEventListener("abort",this.__ajaxUploadAbort,!1),a.open("POST",s,"true"),a.send(e)},__ajaxUploadProgress:function(e){e.lengthComputable&&(e.progress=Math.round(100*e.loaded/e.total),this.state.progress=e.progress,this.state.timeStamp=e.timeStamp,this.forceUpdate()),this.props.onUploading&&this.props.onUploading(e,this)},__ajaxUploadComplete:function(e){if(this.reset(),this.state.progress=0,this.state.timeStamp=0,this.forceUpdate(),0==e.target.responseText.indexOf("<!DOCTYPE html>"))return alert(e.target.responseText),!1;if(0==e.target.responseText.indexOf("{")||0==e.target.responseText.indexOf("[")){var t=JSON.parse(e.target.responseText);200==t.code?this.props.onComplete&&this.props.onComplete(t.result,this):(alert(t.result||t.message),this.props.onError&&this.props.onError(t.result,this))}},__ajaxUploadError:function(e){this.reset(),this.props.onError&&this.props.onError(e.message,this)},__ajaxUploadAbort:function(e){this.reset(),this.props.onAbort&&this.props.onAbort(e,this)},reset:function(){this.setState({loading:!1}),i.findDOMNode(this).reset()},__renderProcess:function(){if(this.state.progress)return 100==this.state.progress?a.createElement("div",{className:"upload-progress",style:{height:"100%"}},a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"check",className:"svg-inline--fa fa-check fa-w-16 ",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},a.createElement("path",{fill:"currentColor",d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}))):a.createElement("div",{className:"upload-progress",style:{height:this.state.progress+"%"}},this.state.progress+"%","(",(this.state.timeStamp/1e3).toFixed(1),"s)")},render:function(){var e=this.state.host||zn.setting.path("zr.uploader.uploadHost"),t=this.props.action||this.props.uploadApi||zn.setting.path("zr.uploader.uploadApi");return(t=e+t)||console.error("文件上传接口未输入"),a.createElement("form",{className:znui.react.classname("zr-ajax-uploader",this.props.className),"data-loading":this.state.loading,action:t,encType:"multipart/form-data",method:"POST"},this.__renderProcess(),a.createElement("div",{className:"ajax-upload-container"},this.props.children),this.props.hint&&a.createElement("span",{className:"size"},this.props.size+" "+znui.react.stringifyFileSize(this.props.maxFileSize)),a.createElement("input",{multiple:this.props.multiple,className:"input",type:"file",name:this.props.name||"zr_ajax_uploader_file_"+Date.now(),onChange:this.__onInputChange,onClick:this.__onInputClick}),a.createElement("div",{className:"ajax-upload-icon"},a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"upload",className:"svg-inline--fa fa-upload fa-w-16 ",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},a.createElement("path",{fill:"currentColor",d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}))))}})},function(e,t,s){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=znui.React||s(0);e.exports=znui.react.createClass({displayName:"FileViewer",getDefaultProps:function(){return{valueKey:"tempName",width:480,height:320}},getInitialState:function(){return{host:this.props.host||zn.setting.path("zr.uploader.host"),fullScreen:!1,files:[]}},componentDidMount:function(){!1!==(this.props.didMount&&this.props.didMount(this))&&this.initValue(this.props.value)},initValue:function(e){if(e){if(zn.is(e,"object"))return this.setFile(e),!1;if(zn.is(e,"string")){var t=this.state.host,s=this.props.fetchApi||zn.setting.path("zr.uploader.fetchApi");if(!(s=t+s))return console.error("文件验证接口未输入"),!1;zn.data.get(s+e).then(function(e){200==e.status&&"object"==a(e.data)&&200==e.data.code&&zn.is(e.data.result,"object")&&this.setFiles(e.data.result)}.bind(this),function(){})}}},setFile:function(e){this.state.file=e,this.forceUpdate()},__fileDownloadRender:function(e){var t=this,s=this.state.host||zn.setting.path("zr.uploader.downloadHost"),a=this.props.downloadApi||zn.setting.path("zr.uploader.downloadApi");if(a=s+a)return i.createElement("span",{onClick:function(){return znui.downloadURL(a+e[t.props.valueKey],e.name)},className:"download"},i.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"download",className:"svg-inline--fa fa-download fa-w-16 ",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.createElement("path",{fill:"currentColor",d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"})))},__renderFileContent:function(e){var t=null,s="";return 0==e.type.indexOf("image")?(s=(this.props.host||zn.setting.path("zr.uploader.host")||"")+(zn.setting.path("zr.uploader.fetchImageApi")||"")+e[this.props.valueKey],t=i.createElement("img",{width:this.props.width,height:this.props.height,className:"view img-view",src:s})):0==e.type.indexOf("video")&&(s=(this.props.host||zn.setting.path("zr.uploader.host")||"")+(zn.setting.path("zr.uploader.fetchImageApi")||"")+e[this.props.valueKey],t=i.createElement("video",{className:"view ideo-view",controls:!0,preload:"auto",width:this.props.width,height:this.props.height,poster:this.props.poster},i.createElement("source",{src:s,type:"video/mp4"}),i.createElement("source",{src:s,type:"video/webm"}),i.createElement("p",{className:"tips"},"To view this video please enable JavaScript, and consider upgrading to a web browser that",i.createElement("a",{href:"https://videojs.com/html5-video-support/",target:"_blank"},"supports HTML5 video")))),i.createElement("div",{className:"file-view"},t)},__fullScreen:function(){this.setState({fullScreen:!this.state.fullScreen})},render:function(){var e=this,t=this.state.file;return t?i.createElement("div",{className:znui.react.classname("zr-file-viewer",this.props.className,this.state.fullScreen?"full-screen":""),style:znui.react.style(this.props.style)},i.createElement("div",{className:"file-info"},this.state.fullScreen?i.createElement("svg",{onClick:this.__fullScreen,"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"window-close",className:"svg-inline--fa fa-window-close fa-w-16 ",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.createElement("path",{fill:"currentColor",d:"M464 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-83.6 290.5c4.8 4.8 4.8 12.6 0 17.4l-40.5 40.5c-4.8 4.8-12.6 4.8-17.4 0L256 313.3l-66.5 67.1c-4.8 4.8-12.6 4.8-17.4 0l-40.5-40.5c-4.8-4.8-4.8-12.6 0-17.4l67.1-66.5-67.1-66.5c-4.8-4.8-4.8-12.6 0-17.4l40.5-40.5c4.8-4.8 12.6-4.8 17.4 0l66.5 67.1 66.5-67.1c4.8-4.8 12.6-4.8 17.4 0l40.5 40.5c4.8 4.8 4.8 12.6 0 17.4L313.3 256l67.1 66.5z"})):i.createElement("svg",{onClick:this.__fullScreen,"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"tv",className:"svg-inline--fa fa-tv fa-w-20 ",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"},i.createElement("path",{fill:"currentColor",d:"M592 0H48A48 48 0 0 0 0 48v320a48 48 0 0 0 48 48h240v32H112a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16H352v-32h240a48 48 0 0 0 48-48V48a48 48 0 0 0-48-48zm-16 352H64V64h512z"})),this.__fileDownloadRender(t),i.createElement("a",{className:"link",onClick:function(){return e.__onPreview(t)}},t.name),i.createElement("span",{className:"size"},znui.react.stringifyFileSize(+t.size))),this.__renderFileContent(t)):null}})},function(e,t,s){zn.setting.setKey("zr.uploader",{host:"",uploadHost:"",fetchHost:"",downloadHost:"",uploadApi:"/zxnz.core.fs/upload/files",fetchApi:"/zxnz.core.fs/fetch/file/",fetchsApi:"/zxnz.core.fs/fetch/files/",fetchImageApi:"/zxnz.core.fs/fetch/image/",downloadApi:"/zxnz.core.fs/download/file/"}),e.exports={AjaxUploader:s(1),FileUploader:s(5),FileViewer:s(2),FilesViewer:s(6),ImageUploader:s(7)}},function(e,t){!function(){e.exports=this.ReactDOM}()},function(e,t,s){function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=znui.React||s(0),r=s(1);e.exports=znui.react.createClass({displayName:"FileUploader",getDefaultProps:function(){return{valueKey:"tempName",editable:!0}},getInitialState:function(){return{host:this.props.host||zn.setting.path("zr.uploader.host"),value:[],files:[]}},componentDidMount:function(){!1!==(this.props.didMount&&this.props.didMount(this))&&this.initValue(this.props.value)},__onChange:function(e,t){this.props.onUploaderChange&&this.props.onUploaderChange(e,t,this)},initValue:function(e){if(e){var t=this.state.host,s=this.props.fetchsApi||zn.setting.path("zr.uploader.fetchsApi");if(!(s=t+s))return console.error("文件验证接口未输入"),!1;zn.is(e,"array")&&(e=e.join(",")),zn.data.get(s+e).then(function(e){200==e.status&&"object"==i(e.data)&&200==e.data.code&&zn.is(e.data.result,"array")&&this.setFiles(e.data.result)}.bind(this),function(){})}},__onComplete:function(e,t){this.setFiles(e),this.props.onChange&&this.props.onChange(this.state.value,this),this.props.onComplete&&this.props.onComplete(e,t,this)},setFiles:function(e){var t=this.props.valueKey,s=(e||[]).map(function(e){if(e&&e[t])return e[t]});this.state.value=this.state.value.concat(s),this.state.files=this.state.files.concat(e),this.forceUpdate()},getValue:function(){return this.state.value},setValue:function(e){this.setState({value:e})},__onFileClick:function(e,t){this.props.onFileClick&&this.props.onFileClick(e,t)},__onRemove:function(e,t){this.state.files.splice(t,1),this.state.value.splice(t,1),this.forceUpdate()},__fileDownloadRender:function(e){var t=this,s=this.state.host||zn.setting.path("zr.uploader.downloadHost"),a=this.props.downloadApi||zn.setting.path("zr.uploader.downloadApi");if(a=s+a)return n.createElement("span",{onClick:function(){return znui.downloadURL(a+e[t.props.valueKey],e.name)},className:"download"},n.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"download",className:"svg-inline--fa fa-download fa-w-16 ",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},n.createElement("path",{fill:"currentColor",d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"})))},__renderFiles:function(){if(this.state.files){var i=this.props.editable&&!this.props.disabled&&!this.props.readonly;return n.createElement("ul",{className:"file-list"},this.state.files.map(function(e,t){var s=this;if(e){var a=this.props.onFileRender&&this.props.onFileRender(e,t);return a?a:n.createElement("li",{key:e[this.props.valueKey],className:"file"},i&&n.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"trash-alt",onClick:function(){return s.__onRemove(e,t)},className:"svg-inline--fa fa-remove zr-hover-self-loading fa-trash-alt fa-w-14 ",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},n.createElement("path",{fill:"currentColor",d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"})),this.__fileDownloadRender(e,t),n.createElement("a",{className:"link",onClick:function(){return s.__onFileClick(e,t)}},e.name),n.createElement("span",{className:"size"},znui.react.stringifyFileSize(+e.size)))}}.bind(this)))}},render:function(){var e=this.props.editable&&!this.props.disabled&&!this.props.readonly;return n.createElement("div",{className:znui.react.classname("zr-file-uploader",this.props.className)},e&&n.createElement(r,a({},this.props,{style:this.props.uploaderStyle,onChange:this.__onChange,onComplete:this.__onComplete}),n.createElement("div",{className:"upload-container",style:this.props.style},n.createElement("div",{className:"file-upload-icon"},n.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"file-upload",className:"svg-inline--fa fa-file-upload fa-w-12 ",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"},n.createElement("path",{fill:"currentColor",d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm65.18 216.01H224v80c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16v-80H94.82c-14.28 0-21.41-17.29-11.27-27.36l96.42-95.7c6.65-6.61 17.39-6.61 24.04 0l96.42 95.7c10.15 10.07 3.03 27.36-11.25 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"}))))),this.__renderFiles())}})},function(e,t,s){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=znui.React||s(0),n=s(2);e.exports=znui.react.createClass({displayName:"FilesViewer",getDefaultProps:function(){return{valueKey:"tempName",width:480,height:320}},getInitialState:function(){return{host:this.props.host||zn.setting.path("zr.uploader.host"),files:[]}},componentDidMount:function(){!1!==(this.props.didMount&&this.props.didMount(this))&&this.initValue(this.props.value)},initValue:function(e){if(e){if(zn.is(e[0],"object"))return this.setFiles([e]),!1;if(zn.is(e,"array")&&e.length&&zn.is(e[0],"object"))return this.setFiles(e),!1;var t=this.state.host,s=this.props.fetchsApi||zn.setting.path("zr.uploader.fetchsApi");if(!(s=t+s))return alert("文件验证接口未输入"),!1;zn.is(e,"array")&&(e=e.join(",")),zn.data.get(s+e).then(function(e){200==e.status&&"object"==a(e.data)&&200==e.data.code&&zn.is(e.data.result,"array")?this.setFiles(e.data.result):alert("FilesViewer.js 网络请求错误")}.bind(this),function(){alert("FilesViewer.js 网络请求错误")})}},setFiles:function(e){this.state.files=e,this.forceUpdate()},__renderFiles:function(){if(this.state.files)return i.createElement("div",{className:"file-list"},this.state.files.map(function(e,t){if(e){var s=this.props.onFileRender&&this.props.onFileRender(e,t);return s?s:i.createElement(n,{key:t,width:this.props.width,height:this.props.height,value:e,valueKey:this.props.valueKey})}}.bind(this)))},render:function(){return i.createElement("div",{className:znui.react.classname("zr-file-viewer",this.props.className),style:znui.react.style(this.props.style)},this.__renderFiles())}})},function(e,t,s){function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var i=znui.React||s(0),n=s(1);e.exports=i.createClass({displayName:"ImageUploader",getDefaultProps:function(){return{value:""}},getInitialState:function(){return{value:this.props.value,imageDataURL:null}},__onChange:function(e){var t=e[0];if(-1==t.type.indexOf("image"))return alert(t.name+" 不是图片文件"),!1;if(FileReader){var s=new FileReader;s.onload=function(e){this.setState({imageDataURL:e.target.result})}.bind(this),s.readAsDataURL(t)}},__onComplete:function(e){var t=e[0];t&&this.setValue(t[this.props.valueKey||"savedName"]),this.props.onComplete&&this.props.onComplete(t,this)},getValue:function(){return this.state.value},setValue:function(e){this.setState({value:e},function(){this.props.onChange&&this.props.onChange(e,this)}.bind(this))},__renderImage:function(){var e=this.state.imageDataURL;return e||(e=this.state.value)&&0!=e.indexOf("http")&&(e=-1!=e.indexOf("/")?(this.props.host||zn.setting.path("zr.uploader.host")||"")+e:(this.props.host||zn.setting.path("zr.uploader.host")||"")+(zn.setting.path("zr.uploader.fetchImageApi")||"")+e),e?i.createElement("img",{className:"img",src:e}):i.createElement("div",{className:"img-upload-icon"},i.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"image",className:"svg-inline--fa fa-image fa-w-16 ",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.createElement("path",{fill:"currentColor",d:"M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"})))},render:function(){return i.createElement(n,a({},this.props,{className:znui.react.classname("zr-image-uploader",this.props.className),onChange:this.__onChange,onComplete:this.__onComplete,multiple:!1}),i.createElement("div",{className:"image-container",style:this.props.style},this.__renderImage()))}})}]));