(function(e,t){for(var n in t)e[n]=t[n]})(this,function(n){var r={};function i(e){if(r[e]){return r[e].exports}var t=r[e]={i:e,l:false,exports:{}};n[e].call(t.exports,t,t.exports,i);t.l=true;return t.exports}i.m=n;i.c=r;i.d=function(e,t,n){if(!i.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:n})}};i.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};i.t=function(t,e){if(e&1)t=i(t);if(e&8)return t;if(e&4&&typeof t==="object"&&t&&t.__esModule)return t;var n=Object.create(null);i.r(n);Object.defineProperty(n,"default",{enumerable:true,value:t});if(e&2&&typeof t!="string")for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n};i.n=function(t){var e=t&&t.__esModule?function e(){return t["default"]}:function e(){return t};i.d(e,"a",e);return e};i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};i.p="";return i(i.s=4)}([function(e,t,n){function u(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){u=function e(t){return typeof t}}else{u=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return u(e)}var r=n(1)||znui.React;var i=n(7)||znui.ReactDOM;var o=n(2);var a=n(3);e.exports=r.createClass({displayName:"AjaxUploader",getDefaultProps:function e(){return{action:znui.react.config.get("AjaxUploader.action")||"",changeSubmit:true,hiddens:null,multiple:true,size:""}},getInitialState:function e(){return{loading:false}},__onInputChange:function e(t){if(this.state.loading){return false}var n=t.nativeEvent.target.files;if(n.length){var r=this.props.onChange&&this.props.onChange(n,this);if(r!==false&&this.props.changeSubmit){var i=new FormData,o=this.props.hiddens||{},a=null;if(zn.is(r,"object")){zn.extend(o,r)}for(var s in o){a=o[s];if(u(a)=="object"){a=JSON.stringify(a)}i.append(s,a)}for(var l=0,c=n.length;l<c;l++){i.append("upload_file_"+l,n[l])}this.ajaxUpload(i)}}},__onInputClick:function e(t){if(this.state.loading){return false}t.stopPropagation();this.props.onUploaderClick&&this.props.onUploaderClick(t,this)},ajaxUpload:function e(t){this.setState({loading:true});var n=new XMLHttpRequest;n.upload.addEventListener("progress",this.__ajaxUploadProgress,false);n.addEventListener("load",this.__ajaxUploadComplete,false);n.addEventListener("error",this.__ajaxUploadError,false);n.addEventListener("abort",this.__ajaxUploadAbort,false);n.open("POST",zn.http.fixURL(this.props.action),"true");n.send(t)},__ajaxUploadProgress:function e(t){if(t.lengthComputable){t.progress=Math.round(t.loaded*100/t.total)}console.log(t);this.props.onUploading&&this.props.onUploading(t,this)},__ajaxUploadComplete:function e(t){this.reset();var n=JSON.parse(t.target.responseText);if(n.status==200){this.props.onComplete&&this.props.onComplete(n.result,this)}else{zn.confirm(n.result);this.props.onError&&this.props.onError(n.result,this)}},__ajaxUploadError:function e(t){this.reset();this.props.onError&&this.props.onError(t.message,this)},__ajaxUploadAbort:function e(t){this.reset();this.props.onAbort&&this.props.onAbort(t,this)},reset:function e(){this.setState({loading:false});i.findDOMNode(this).reset()},render:function e(){return r.createElement("form",{className:znui.react.classname("zr-ajax-uploader",this.props.className),style:this.props.style,"data-loading":this.state.loading,action:zn.http.fixURL(this.props.action||""),encType:"multipart/form-data",method:"POST"},r.createElement("div",{className:"ajax-upload-container"},this.props.children),this.props.size&&r.createElement("span",{className:"size"},this.props.size),r.createElement("input",{multiple:this.props.multiple,className:"input",type:"file",name:this.props.name||"upload_file_"+(new Date).getTime(),onChange:this.__onInputChange,onClick:this.__onInputClick}),r.createElement("div",{className:"ajax-upload-icon"},r.createElement(o.FontAwesomeIcon,{icon:a.faUpload})))}})},function(e,t){(function(){e.exports=this["React"]})()},function(e,t){(function(){e.exports=this["reactfa"]})()},function(e,t){(function(){e.exports=this["reactfssi"]})()},function(e,t,n){if(!znui||!znui.react){n(5)}e.exports={AjaxUploader:n(0),FileUploader:n(8),ImageUploader:n(9)}},function(e,t,n){e.exports=n(6)},function(e,t,n){(function(e,t){for(var n in t)e[n]=t[n]})(this,function(n){var r={};function i(e){if(r[e]){return r[e].exports}var t=r[e]={i:e,l:false,exports:{}};n[e].call(t.exports,t,t.exports,i);t.l=true;return t.exports}i.m=n;i.c=r;i.d=function(e,t,n){if(!i.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:n})}};i.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};i.t=function(t,e){if(e&1)t=i(t);if(e&8)return t;if(e&4&&typeof t==="object"&&t&&t.__esModule)return t;var n=Object.create(null);i.r(n);Object.defineProperty(n,"default",{enumerable:true,value:t});if(e&2&&typeof t!="string")for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n};i.n=function(t){var e=t&&t.__esModule?function e(){return t["default"]}:function e(){return t};i.d(e,"a",e);return e};i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};i.p="";return i(i.s=1)}([function(e,t){(function(){e.exports=this["React"]})()},function(e,t,r){e.exports=znui.react={Application:r(2),config:{set:function e(t,n){return this["__"+t+"__"]=n,this},sets:function e(t){for(var n in t){this.set(n,t[n])}return this},get:function e(t){return this["__"+t+"__"]}},fixCreateReactClass:function e(t,n){if(t&&n){if(t&&!t.createClass){t.createClass=n}}this.React=t;return t},createClass:function e(t){if(this.React){return this.React.createClass.call(this.React,t)}else{var n=r(0);if(n){if(!n.createClass){n.createClass=r(4)}if(n.createClass){return n.createClass.call(n,t)}else{throw new Error("create-react-class is not exist.")}}else{throw new Error("react is not exist.")}}},classname:function e(){return znui.classname.apply(this,Array.prototype.slice.call(arguments))},style:function e(){var n={};zn.each(Array.prototype.slice.call(arguments),function(e,t){if(e){switch(zn.type(e)){case"object":zn.extend(n,e);break;case"array":zn.extend(n,this.style.apply(this,e));break;case"function":zn.extend(n,e.call(null)||{});break}}}.bind(this));return n}}},function(e,t,i){e.exports=zn.Class({statics:{create:function e(t){var n={},r={init:function e(t){this["super"](t);this.sets(t)}};zn.each(t,function(e,t){if(zn.type(e)=="function"&&!e.displayName){r[t]=e}else{n[t]=e}});var i=zn.Class(this,{methods:r,properties:n});return new i(n)}},properties:{container:"container",absolute:true,home:null,main:null,host:window.location.origin,router:null,global:null,plugins:[]},methods:{init:function e(t){this.sets(t);this.__initArgv(t);var n=this.onInit&&this.onInit.call(this,this.gets());if(n!==false){this.update(n)}},__initArgv:function e(t){var n={},r={},i=null,o=this.get("path"),a=this;this.get("plugins")&&this.get("plugins").forEach(function(e){if(zn.is(e,"string")){e=a.onLoading(e)}if(zn.is(e,"array")){zn.extend(n,e[1]);e=e[0]}zn.extend(r,e)});if(t.routers){var s=zn.deepEachObject(t.routers,this.onLoading.bind(this));zn.extend(r,s);if(o){var l={},c=n[o]||r[o];r["/"]=c;n[o]=r}else{n=r;zn.extend(n,s)}}this._routers=n;this._relativeRouters=r;console.log(this._routers,this._relativeRouters);znui.util.Session.setHome(this.get("home")).setMain(this.get("main")).setBasePath(this.get("path"));zn.http.setHost(this.get("host"),this.get("port"))},onLoading:function e(t){return t},__getRenderView:function e(){return this.render&&this.render.call(this,this.gets())},update:function e(t){var n=this.get("router");if(!n){n=znui.isMobile()?znui.react.WapRouter:znui.react.WebRouter}if(!n){return alert("只适合手机版本打开!"),false}var r=t||this.__getRenderView();_container=this.get("container");_container=zn.type(_container)=="string"?document.getElementById(_container):_container;if(this.get("absolute")){_container.style.position="absolute";_container.style.width="100%";_container.style.height="100%"}if(znui.isMobile()){_container.classList.add("zr-mobile")}if(this.get("global")){r=React.createElement("div",{style:{width:"100%",height:"100%"}},r,this.get("global"))}setTimeout(function(){return i(3).render(r,_container)},50)}}})},function(e,t){(function(){e.exports=this["ReactDOM"]})()},function(e,t,n){"use strict";var r=n(0);var i=n(5);if(typeof r==="undefined"){throw Error("create-react-class could not find the React object. If you are using script tags, "+"make sure that React is being loaded before create-react-class.")}var o=(new r.Component).updater;e.exports=i(r.Component,r.isValidElement,o)},function(e,t,n){"use strict";var b=n(6);var x=n(7);var N=n(8);if(false){var r}var C="mixins";function j(e){return e}var i;if(false){}else{i={}}function o(e,h,o){var n=[];var d={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"};var s={getDerivedStateFromProps:"DEFINE_MANY_MERGED"};var m={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t){for(var n=0;n<t.length;n++){r(e,t[n])}}},childContextTypes:function(e,t){if(false){}e.childContextTypes=b({},e.childContextTypes,t)},contextTypes:function(e,t){if(false){}e.contextTypes=b({},e.contextTypes,t)},getDefaultProps:function(e,t){if(e.getDefaultProps){e.getDefaultProps=g(e.getDefaultProps,t)}else{e.getDefaultProps=t}},propTypes:function(e,t){if(false){}e.propTypes=b({},e.propTypes,t)},statics:function(e,t){i(e,t)},autobind:function(){}};function t(e,t,n){for(var r in t){if(t.hasOwnProperty(r)){if(false){}}}}function v(e,t){var n=d.hasOwnProperty(t)?d[t]:null;if(f.hasOwnProperty(t)){N(n==="OVERRIDE_BASE","ReactClassInterface: You are attempting to override "+"`%s` from your class specification. Ensure that your method names "+"do not overlap with React methods.",t)}if(e){N(n==="DEFINE_MANY"||n==="DEFINE_MANY_MERGED","ReactClassInterface: You are attempting to define "+"`%s` on your component more than once. This conflict may be due "+"to a mixin.",t)}}function r(e,t){if(!t){if(false){var n,r}return}N(typeof t!=="function","ReactClass: You're attempting to "+"use a component class or function as a mixin. Instead, just use a "+"regular object.");N(!h(t),"ReactClass: You're attempting to "+"use a component as a mixin. Instead, just use a regular object.");var i=e.prototype;var o=i.__reactAutoBindPairs;if(t.hasOwnProperty(C)){m.mixins(e,t.mixins)}for(var a in t){if(!t.hasOwnProperty(a)){continue}if(a===C){continue}var s=t[a];var l=i.hasOwnProperty(a);v(l,a);if(m.hasOwnProperty(a)){m[a](e,s)}else{var c=d.hasOwnProperty(a);var u=typeof s==="function";var p=u&&!c&&!l&&t.autobind!==false;if(p){o.push(a,s);i[a]=s}else{if(l){var f=d[a];N(c&&(f==="DEFINE_MANY_MERGED"||f==="DEFINE_MANY"),"ReactClass: Unexpected spec policy %s for key %s "+"when mixing in component specs.",f,a);if(f==="DEFINE_MANY_MERGED"){i[a]=g(i[a],s)}else if(f==="DEFINE_MANY"){i[a]=y(i[a],s)}}else{i[a]=s;if(false){}}}}}}function i(e,t){if(!t){return}for(var n in t){var r=t[n];if(!t.hasOwnProperty(n)){continue}var i=n in m;N(!i,"ReactClass: You are attempting to define a reserved "+'property, `%s`, that shouldn\'t be on the "statics" key. Define it '+"as an instance property instead; it will still be accessible on the "+"constructor.",n);var o=n in e;if(o){var a=s.hasOwnProperty(n)?s[n]:null;N(a==="DEFINE_MANY_MERGED","ReactClass: You are attempting to define "+"`%s` on your component more than once. This conflict may be "+"due to a mixin.",n);e[n]=g(e[n],r);return}e[n]=r}}function a(e,t){N(e&&t&&typeof e==="object"&&typeof t==="object","mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in t){if(t.hasOwnProperty(n)){N(e[n]===undefined,"mergeIntoWithNoDuplicateKeys(): "+"Tried to merge two objects with the same key: `%s`. This conflict "+"may be due to a mixin; in particular, this may be caused by two "+"getInitialState() or getDefaultProps() methods returning objects "+"with clashing keys.",n);e[n]=t[n]}}return e}function g(i,o){return function e(){var t=i.apply(this,arguments);var n=o.apply(this,arguments);if(t==null){return n}else if(n==null){return t}var r={};a(r,t);a(r,n);return r}}function y(t,n){return function e(){t.apply(this,arguments);n.apply(this,arguments)}}function l(e,t){var n=t.bind(e);if(false){var r,i}return n}function c(e){var t=e.__reactAutoBindPairs;for(var n=0;n<t.length;n+=2){var r=t[n];var i=t[n+1];e[r]=l(e,i)}}var u={componentDidMount:function(){this.__isMounted=true}};var p={componentWillUnmount:function(){this.__isMounted=false}};var f={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){if(false){}return!!this.__isMounted}};var _=function(){};b(_.prototype,e.prototype,f);function E(e){var i=j(function(e,t,n){if(false){}if(this.__reactAutoBindPairs.length){c(this)}this.props=e;this.context=t;this.refs=x;this.updater=n||o;this.state=null;var r=this.getInitialState?this.getInitialState():null;if(false){}N(typeof r==="object"&&!Array.isArray(r),"%s.getInitialState(): must return an object or null",i.displayName||"ReactCompositeComponent");this.state=r});i.prototype=new _;i.prototype.constructor=i;i.prototype.__reactAutoBindPairs=[];n.forEach(r.bind(null,i));r(i,u);r(i,e);r(i,p);if(i.getDefaultProps){i.defaultProps=i.getDefaultProps()}if(false){}N(i.prototype.render,"createClass(...): Class specification must implement a `render` method.");if(false){}for(var t in d){if(!i.prototype[t]){i.prototype[t]=null}}return i}return E}e.exports=o},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var l=Object.getOwnPropertySymbols;var c=Object.prototype.hasOwnProperty;var u=Object.prototype.propertyIsEnumerable;function p(e){if(e===null||e===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(e)}function r(){try{if(!Object.assign){return false}var e=new String("abc");e[5]="de";if(Object.getOwnPropertyNames(e)[0]==="5"){return false}var t={};for(var n=0;n<10;n++){t["_"+String.fromCharCode(n)]=n}var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if(r.join("")!=="0123456789"){return false}var i={};"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e});if(Object.keys(Object.assign({},i)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(e){return false}}e.exports=r()?Object.assign:function(e,t){var n;var r=p(e);var i;for(var o=1;o<arguments.length;o++){n=Object(arguments[o]);for(var a in n){if(c.call(n,a)){r[a]=n[a]}}if(l){i=l(n);for(var s=0;s<i.length;s++){if(u.call(n,i[s])){r[i[s]]=n[i[s]]}}}}return r}},function(e,t,n){"use strict";var r={};if(false){}e.exports=r},function(e,t,n){"use strict";var p=function e(t){};if(false){}function r(e,t,n,r,i,o,a,s){p(t);if(!e){var l;if(t===undefined){l=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var c=[n,r,i,o,a,s];var u=0;l=new Error(t.replace(/%s/g,function(){return c[u++]}));l.name="Invariant Violation"}l.framesToPop=1;throw l}}e.exports=r}]))},function(e,t){(function(){e.exports=this["ReactDOM"]})()},function(e,t,n){function r(){r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};return r.apply(this,arguments)}var o=n(1)||znui.React;var a=n(0);var s=n(2);var l=n(3);e.exports=o.createClass({displayName:"exports",getDefaultProps:function e(){return{editable:true}},getInitialState:function e(){return{value:","}},__onChange:function e(t){var n=t[0];this.props.onChange&&this.props.onChange(n)},__onComplete:function e(t,n){var r=(t||[]).map(function(e){return e.url});this.state.value=this.state.value+r.join(",")+",";this.forceUpdate();this.props.onComplete&&this.props.onComplete(t,n)},getValue:function e(){return this.state.value},setValue:function e(t){this.setState({value:t})},__onPreview:function e(t){this.props.onPreview&&this.props.onPreview(t)},__renderContent:function e(t){var n=this;var r=this.props.onFileRender&&this.props.onFileRender(t);if(r){return r}return o.createElement("a",{onClick:function e(){return n.__onPreview(t)}},this.__renderFileByType(t.split(".").pop().toLowerCase(),t))},__renderPreviewFileByType:function e(t,n){if(this.props.isImage){return o.createElement("img",{width:"100%",height:"100%",src:zn.http.fixURL(n)})}switch(t){case"jpg":case"png":case"jpeg":case"gif":return o.createElement("img",{width:"100%",height:"100%",src:zn.http.fixURL(n)});case"mp4":case"mpg":case"mpeg":case"mov":case"ogg":case"avi":case"aac":case"aiff":case"qt":case"viv":return o.createElement("video",{width:"100%",height:"100%",preload:"auto",loop:"loop",autoplay:"autoplay",controls:"controls"},o.createElement("source",{src:zn.http.fixURL(n),type:"video/ogg"}),o.createElement("source",{src:zn.http.fixURL(n),type:"video/mp4"}),"Your browser does not support the video tag.");default:return n.split("/").pop()}},__renderFileByType:function e(t,n){if(this.props.isImage){return o.createElement("img",{src:zn.http.fixURL(n)})}switch(t){case"jpg":case"png":case"jpeg":case"gif":return o.createElement("img",{src:zn.http.fixURL(n)});case"mp4":case"mpg":case"mpeg":case"mov":case"ogg":case"avi":case"aac":case"aiff":case"qt":case"viv":return o.createElement("video",{width:"96",height:"96"},o.createElement("source",{src:zn.http.fixURL(n),type:"video/ogg"}),o.createElement("source",{src:zn.http.fixURL(n),type:"video/mp4"}),"Your browser does not support the video tag.");default:return n.split("/").pop()}},__onRemove:function e(t,n){this.state.value=this.state.value.replace(t,"");this.forceUpdate()},render:function e(){var t=this.state.value.split(",");var i=this.props.editable&&!this.props.disabled&&!this.props.readonly;return o.createElement("div",{className:znui.react.classname("zr-file-uploader",this.props.className),style:this.props.style},i&&o.createElement(a,r({},this.props,{style:this.props.uploaderStyle,onChange:this.__onChange,onComplete:this.__onComplete}),o.createElement("div",{className:"container"},o.createElement("div",{className:"file-upload-icon"},o.createElement(s.FontAwesomeIcon,{icon:l.faFileUpload})))),o.createElement("ul",{className:"file-list"},t.map(function(t,n){var r=this;if(t){return o.createElement("li",{key:n,className:"file"},i&&o.createElement("i",{className:"fa fa-remove zr-hover-self-loading",onClick:function e(){return r.__onRemove(t,n)}}),this.__renderContent(t))}}.bind(this))))}})},function(e,t,n){function r(){r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};return r.apply(this,arguments)}var i=n(1)||znui.React;var o=n(0);var a=n(2);var s=n(3);e.exports=i.createClass({displayName:"exports",getDefaultProps:function e(){return{value:znui.react.config.get("ImageUploader.value")||""}},getInitialState:function e(){return{value:this.props.value}},__onChange:function e(t){var n=t[0];if(n.type.indexOf("image")==-1){alert("文件["+n.name+"]不是图片类型");return false}},__onComplete:function e(t,n){var r=t[0];if(r){var i=r.url;if(i.indexOf("/")!=0){i="/"+i}this.setValue(i)}this.props.onComplete&&this.props.onComplete(r,this)},getValue:function e(){return this.state.value},setValue:function e(t){this.setState({value:t},function(){this.props.onChange&&this.props.onChange(t,this)}.bind(this))},render:function e(){var t=this.state.value;if(t.indexOf("/")==0){t=zn.http.fixURL(this.state.value)}return i.createElement(o,r({},this.props,{className:znui.react.classname("zr-image-uploader",this.props.className),onChange:this.__onChange,onComplete:this.__onComplete,multipart:false}),i.createElement("div",{className:"container"},!!t?i.createElement("img",{className:"img",src:t}):i.createElement("div",{className:"image-upload-icon"},i.createElement(a.FontAwesomeIcon,{icon:s.faImage}))))}})}]));