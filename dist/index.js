(function(e,t){for(var n in t)e[n]=t[n]})(this,function(n){var r={};function a(e){if(r[e]){return r[e].exports}var t=r[e]={i:e,l:false,exports:{}};n[e].call(t.exports,t,t.exports,a);t.l=true;return t.exports}a.m=n;a.c=r;a.d=function(e,t,n){if(!a.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:n})}};a.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};a.t=function(t,e){if(e&1)t=a(t);if(e&8)return t;if(e&4&&typeof t==="object"&&t&&t.__esModule)return t;var n=Object.create(null);a.r(n);Object.defineProperty(n,"default",{enumerable:true,value:t});if(e&2&&typeof t!="string")for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n};a.n=function(t){var e=t&&t.__esModule?function e(){return t["default"]}:function e(){return t};a.d(e,"a",e);return e};a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};a.p="";return a(a.s=4)}([function(e,t,n){function c(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){c=function e(t){return typeof t}}else{c=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return c(e)}n(5);var r=n(1);var a=n(6);var o=n(2);var i=n(3);e.exports=r.createClass({displayName:"AjaxUploader",getDefaultProps:function e(){return{action:znui.react.config.get("AjaxUploader.action")||"",changeSubmit:true,hiddens:null,multiple:true,size:""}},getInitialState:function e(){return{loading:false}},__onInputChange:function e(t){if(this.state.loading){return false}var n=t.nativeEvent.target.files;if(n.length){var r=this.props.onChange&&this.props.onChange(n,this);if(r!==false&&this.props.changeSubmit){var a=new FormData,o=this.props.hiddens||{},i=null;if(zn.is(r,"object")){zn.extend(o,r)}for(var s in o){i=o[s];if(c(i)=="object"){i=JSON.stringify(i)}a.append(s,i)}for(var p=0,l=n.length;p<l;p++){a.append("upload_file_"+p,n[p])}this.ajaxUpload(a)}}},__onInputClick:function e(t){if(this.state.loading){return false}t.stopPropagation();this.props.onUploaderClick&&this.props.onUploaderClick(t,this)},ajaxUpload:function e(t){this.setState({loading:true});var n=new XMLHttpRequest;n.upload.addEventListener("progress",this.__ajaxUploadProgress,false);n.addEventListener("load",this.__ajaxUploadComplete,false);n.addEventListener("error",this.__ajaxUploadError,false);n.addEventListener("abort",this.__ajaxUploadAbort,false);n.open("POST",zn.http.fixURL(this.props.action),"true");n.send(t)},__ajaxUploadProgress:function e(t){if(t.lengthComputable){t.progress=Math.round(t.loaded*100/t.total)}console.log(t);this.props.onUploading&&this.props.onUploading(t,this)},__ajaxUploadComplete:function e(t){this.reset();var n=JSON.parse(t.target.responseText);if(n.status==200){this.props.onComplete&&this.props.onComplete(n.result,this)}else{zn.confirm(n.result);this.props.onError&&this.props.onError(n.result,this)}},__ajaxUploadError:function e(t){this.reset();this.props.onError&&this.props.onError(t.message,this)},__ajaxUploadAbort:function e(t){this.reset();this.props.onAbort&&this.props.onAbort(t,this)},reset:function e(){this.setState({loading:false});a.findDOMNode(this).reset()},render:function e(){return r.createElement("form",{className:znui.react.classname("znui-react-ajax-uploader",this.props.className),style:this.props.style,"data-loading":this.state.loading,action:zn.http.fixURL(this.props.action||""),encType:"multipart/form-data",method:"POST"},r.createElement("div",{className:"ajax-upload-container"},this.props.children),this.props.size&&r.createElement("span",{className:"size"},this.props.size),r.createElement("input",{multiple:this.props.multiple,className:"input",type:"file",name:this.props.name||"upload_file_"+(new Date).getTime(),onChange:this.__onInputChange,onClick:this.__onInputClick}),r.createElement("div",{className:"ajax-upload-icon"},r.createElement(o.FontAwesomeIcon,{icon:i.faUpload})))}})},function(e,t){(function(){e.exports=this["React"]})()},function(e,t){(function(){e.exports=this["reactfa"]})()},function(e,t){(function(){e.exports=this["reactfssi"]})()},function(e,t,n){e.exports={AjaxUploader:n(0),FileUploader:n(7),ImageUploader:n(9)}},function(e,t){},function(e,t){(function(){e.exports=this["ReactDOM"]})()},function(e,t,n){function r(){r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};return r.apply(this,arguments)}n(8);var o=n(1);var i=n(0);var s=n(2);var p=n(3);e.exports=o.createClass({displayName:"exports",getDefaultProps:function e(){return{editable:true}},getInitialState:function e(){return{value:","}},__onChange:function e(t){var n=t[0];this.props.onChange&&this.props.onChange(n)},__onComplete:function e(t,n){var r=(t||[]).map(function(e){return e.url});this.state.value=this.state.value+r.join(",")+",";this.forceUpdate();this.props.onComplete&&this.props.onComplete(t,n)},getValue:function e(){return this.state.value},setValue:function e(t){this.setState({value:t})},__onPreview:function e(t){this.props.onPreview&&this.props.onPreview(t)},__renderContent:function e(t){var n=this;var r=this.props.onFileRender&&this.props.onFileRender(t);if(r){return r}return o.createElement("a",{onClick:function e(){return n.__onPreview(t)}},this.__renderFileByType(t.split(".").pop().toLowerCase(),t))},__renderPreviewFileByType:function e(t,n){if(this.props.isImage){return o.createElement("img",{width:"100%",height:"100%",src:zn.http.fixURL(n)})}switch(t){case"jpg":case"png":case"jpeg":case"gif":return o.createElement("img",{width:"100%",height:"100%",src:zn.http.fixURL(n)});case"mp4":case"mpg":case"mpeg":case"mov":case"ogg":case"avi":case"aac":case"aiff":case"qt":case"viv":return o.createElement("video",{width:"100%",height:"100%",preload:"auto",loop:"loop",autoplay:"autoplay",controls:"controls"},o.createElement("source",{src:zn.http.fixURL(n),type:"video/ogg"}),o.createElement("source",{src:zn.http.fixURL(n),type:"video/mp4"}),"Your browser does not support the video tag.");default:return n.split("/").pop()}},__renderFileByType:function e(t,n){if(this.props.isImage){return o.createElement("img",{src:zn.http.fixURL(n)})}switch(t){case"jpg":case"png":case"jpeg":case"gif":return o.createElement("img",{src:zn.http.fixURL(n)});case"mp4":case"mpg":case"mpeg":case"mov":case"ogg":case"avi":case"aac":case"aiff":case"qt":case"viv":return o.createElement("video",{width:"96",height:"96"},o.createElement("source",{src:zn.http.fixURL(n),type:"video/ogg"}),o.createElement("source",{src:zn.http.fixURL(n),type:"video/mp4"}),"Your browser does not support the video tag.");default:return n.split("/").pop()}},__onRemove:function e(t,n){this.state.value=this.state.value.replace(t,"");this.forceUpdate()},render:function e(){var t=this.state.value.split(",");var a=this.props.editable&&!this.props.disabled&&!this.props.readonly;return o.createElement("div",{className:znui.react.classname("znui-react-file-uploader",this.props.className),style:this.props.style},a&&o.createElement(i,r({},this.props,{style:this.props.uploaderStyle,onChange:this.__onChange,onComplete:this.__onComplete}),o.createElement("div",{className:"container"},o.createElement("div",{className:"file-upload-icon"},o.createElement(s.FontAwesomeIcon,{icon:p.faFileUpload})))),o.createElement("ul",{className:"file-list"},t.map(function(t,n){var r=this;if(t){return o.createElement("li",{key:n,className:"file"},a&&o.createElement("i",{className:"fa fa-remove zr-hover-self-loading",onClick:function e(){return r.__onRemove(t,n)}}),this.__renderContent(t))}}.bind(this))))}})},function(e,t){},function(e,t,n){function r(){r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};return r.apply(this,arguments)}n(10);var a=n(1);var o=n(0);var i=n(2);var s=n(3);e.exports=a.createClass({displayName:"exports",getDefaultProps:function e(){return{value:znui.react.config.get("ImageUploader.value")||""}},getInitialState:function e(){return{value:this.props.value}},__onChange:function e(t){var n=t[0];if(n.type.indexOf("image")==-1){alert("文件["+n.name+"]不是图片类型");return false}},__onComplete:function e(t,n){var r=t[0];if(r){var a=r.url;if(a.indexOf("/")!=0){a="/"+a}this.setValue(a)}this.props.onComplete&&this.props.onComplete(r,this)},getValue:function e(){return this.state.value},setValue:function e(t){this.setState({value:t},function(){this.props.onChange&&this.props.onChange(t,this)}.bind(this))},render:function e(){var t=this.state.value;if(t.indexOf("/")==0){t=zn.http.fixURL(this.state.value)}return a.createElement(o,r({},this.props,{className:znui.react.classname("znui-react-image-uploader",this.props.className),onChange:this.__onChange,onComplete:this.__onComplete,multipart:false}),a.createElement("div",{className:"container"},!!t?a.createElement("img",{className:"img",src:t}):a.createElement("div",{className:"image-upload-icon"},a.createElement(i.FontAwesomeIcon,{icon:s.faImage}))))}})},function(e,t){}]));